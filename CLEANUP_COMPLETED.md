# üßπ Cleanup: –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥—É–±–ª—é–≤–∞–Ω–Ω—è —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### 1Ô∏è‚É£ **–í–∏–¥–∞–ª–µ–Ω–æ 5 –∑–∞–π–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤ —ñ–∑ root `elearn-backend/`**
```
‚ùå add-more-content.ts         (628 —Ä—è–¥–∫—ñ–≤) - –¥—É–±–ª—é–≤–∞–Ω–Ω—è seed –ª–æ–≥—ñ–∫–∏
‚ùå add-new-categories-content.ts (365 —Ä—è–¥–∫—ñ–≤) - —Ç–µ —Å–∞–º–µ –¥–ª—è –Ω–æ–≤–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
‚ùå check-db.js                  (23 —Ä—è–¥–∫–∏) - –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π —Å–∫—Ä–∏–ø—Ç
‚ùå check-keys.js                (43 —Ä—è–¥–∫–∏) - –∑–∞–º—ñ–Ω–µ–Ω–æ –Ω–∞ check-system.ts
‚ùå test-api.mjs                 (–Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)
```

**–ß–æ–º—É –≤–∏–¥–∞–ª–µ–Ω–æ:**
- –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –¥—É–±–ª—é–≤–∞–ª–∞—Å—è –∑ –æ—Å–Ω–æ–≤–Ω–∏—Ö seed —Å–∫—Ä–∏–ø—Ç—ñ–≤
- –ë—É–ª–∏ –≤ —Ä–∞–∑–ª–∏—á–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (ESM/CommonJS –º—ñ–∫—Å)
- –ù–µ –±—É–ª–∏ —Ä–µ–≥—ñ—Å—Ç—Ä–æ–≤–∞–Ω—ñ –≤ `package.json`

---

### 2Ô∏è‚É£ **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ —Ç–∏–ø –º—É–ª—å—Ç–∏–º–æ–≤–Ω–∏—Ö –ø–æ–ª—ñ–≤ –≤ Shared**

**–î–æ–¥–∞–Ω–æ –≤ `packages/shared/src/types/index.ts`:**
```typescript
export interface LocalizedObject {
  UA: string
  PL: string
  EN: string
}
```

**–†–∞–Ω—ñ—à–µ –¥—É–±–ª—é–≤–∞–ª–æ—Å—å —è–∫:**
- `type NameJson = { UA: string; PL: string; EN: string }`
- –í —Ñ–∞–π–ª–∞—Ö: `add-more-content.ts`, `add-new-categories-content.ts`, `seed.safe.ts`, `seed-i18n-normalized.ts`

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –¢–∏–ø –≤–∏–∑–Ω–∞—á–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å  –ø–æ –≤—Å—å–æ–º—É –ø—Ä–æ–µ–∫—Ç—É
- ‚úÖ –õ–µ–≥—à–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É

---

### 3Ô∏è‚É£ **–ö–æ–Ω—Å–æ–ª—ñ–¥–æ–≤–∞–Ω–æ Validation Schemas**

**–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∑ `src/routes/auth.ts` –≤ `src/utils/validation.ts`:**
```typescript
registerSchema       // –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
loginSchema         // –í—Ö—ñ–¥
changePasswordSchema // –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è
changeEmailSchema    // –ó–º—ñ–Ω–∞ email
forgotPasswordSchema // –ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å
resetPasswordSchema  // –°–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è
verifyEmailSchema    // –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è email
resendVerificationEmailSchema
avatarSchema        // –ê–≤–∞—Ç–∞—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
updateProfileSchema // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—è
```

**–û–Ω–æ–≤–ª–µ–Ω–æ `src/routes/auth.ts`:**
- –ó–∞–º—ñ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω–∏—Ö –¥–µ—Ñ—ñ–Ω—ñ—Ü—ñ–π - —ñ–º–ø–æ—Ä—Ç—É—î –≤—Å—ñ —Å—Ö–µ–º–∏ –∑ validation.ts
- –ö–æ–¥ —Å—Ç–∞–≤ –Ω–∞ 70 —Ä—è–¥–∫—ñ–≤ –∫–æ—Ä–æ—Ç—à–µ!

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –Ñ–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–¥–∏ –¥–ª—è —Å—Ö–µ–º
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ—Å—Ç–∞—Ö
- ‚úÖ –õ–µ–≥—à–µ –∑–º—ñ–Ω–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é - –Ω–µ –∑–∞–±—É—Ç–∏ –æ–Ω–æ–≤–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ –º—ñ—Å—Ü—å

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ü–æ–∫–∞–∑–Ω–∏–∫ | –ß–∏—Å–ª–æ |
|----------|--------|
| **–í–∏–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª—ñ–≤** | 5 |
| **–í–∏–¥–∞–ª–µ–Ω–æ —Ä—è–¥–∫—ñ–≤ –∫–æ–¥—É** | 1,400+ |
| **–ü–µ—Ä–µ–º—ñ—â–µ–Ω–æ –¥—É–±–ª—é–≤–∞–Ω—å** | 3 (—Ç–∏–ø–∏ + —Ñ—É–Ω–∫—Ü—ñ—ó) |
| **–ü–µ—Ä–µ–º—ñ—â–µ–Ω–æ schemas** | 9 |
| **–ó–∞–ª–∏—à–∏–ª–æ—Å—å –¥—É–±–ª—é–≤–∞–Ω–Ω—è** | `upsertTopic()` —Ñ—É–Ω–∫—Ü—ñ—è (4 –º—ñ—Å—Ü—è) |

---

## üî¥ –ó–∞–ª–∏—à–∏–ª–æ—Å—å –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### **–§—É–Ω–∫—Ü—ñ—è `upsertTopic()` –¥—É–±–ª—é—î—Ç—å—Å—è –≤ 4 –º—ñ—Å—Ü—è—Ö:**

1. **`src/prisma/seed.safe.ts`** (—Ä—è–¥–æ–∫ ~12) - –æ—Å–Ω–æ–≤–Ω–∞ –≤–µ—Ä—Å—ñ—è
2. **`scripts/seed-i18n-normalized.ts`** - –∫–æ–ø—ñ—è
3. **`scripts/seed-translations.ts`** - –∫–æ–ø—ñ—è
4. **`scripts/migrate-materials-i18n.ts`** —Ç–∞ —ñ–Ω—à—ñ - –∫–æ–ø—ñ—ó

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:**
- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ `src/prisma/seed-helpers.ts`
- –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Å–∫—Ä—ñ–∑—å –∑–∞–º—ñ—Å—Ç—å –¥—É–±–ª—é–≤–∞–Ω–Ω—è

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—ñ—Å–ª—è cleanup

```
elearn-backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validation.ts     ‚úÖ –í—Å—ñ schemas –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts          ‚úÖ –ß–∏—Å—Ç—ñ—à–∏–π –∫–æ–¥ (–±–µ–∑ –¥—É–±–ª—é–≤–∞–Ω–Ω—è)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ prisma/
‚îÇ       ‚îú‚îÄ‚îÄ seed.safe.ts     ‚úÖ –û—Å–Ω–æ–≤–Ω–∏–π seed
‚îÇ       ‚îî‚îÄ‚îÄ migrations/
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ seed-translations.ts ‚úÖ –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –¥–ª—è i18n
‚îÇ   ‚îú‚îÄ‚îÄ seed-i18n-normalized.ts
‚îÇ   ‚îî‚îÄ‚îÄ check-system.ts      ‚úÖ –Ñ–¥–∏–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ vitest.config.ts

‚ùå –í–ò–î–ê–õ–ï–ù–û:
  - add-more-content.ts
  - add-new-categories-content.ts
  - check-db.js
  - check-keys.js
  - test-api.mjs
```

---

## üéØ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—è `upsertTopic()`:**
   ```bash
   # –°—Ç–≤–æ—Ä–∏—Ç–∏ helper —Ñ–∞–π–ª
   # –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ src/prisma/seed-helpers.ts
   # –û–Ω–æ–≤–∏—Ç–∏ —ñ–º–ø–æ—Ä—Ç–∏ –≤ scripts/
   ```

2. **–ü–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏:**
   ```bash
   npm run test
   npm run db:status
   npm run seed
   ```

3. **–í–∏–¥–∞–ª–∏—Ç–∏ –Ω–µ–∂–∏–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏:**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —è–∫—ñ —Å–∫—Ä–∏–ø—Ç–∏ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è
   - –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó

---

## üß† –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ —á–∏—Å—Ç–æ—Ç–∏ –∫–æ–¥—É

- [x] –í–∏–¥–∞–ª–µ–Ω–æ –¥—É–±–ª—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- [x] –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ —Ç–∏–ø–∏ –≤ Shared
- [x] –ö–æ–Ω—Å–æ–ª—ñ–¥–æ–≤–∞–Ω–æ Validation Schemas
- [ ] –í–∏–¥–∞–ª–µ–Ω–æ –¥—É–±–ª—é–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–π (`upsertTopic`)
- [ ] –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ `tsconfig.json` –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- [ ] –û—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ

---

## üí° –ü–æ—É—á–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

**–î—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É - —Ü–µ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π –±–æ—Ä–≥!** –ö–æ–∂–Ω–∞ –∫–æ–ø—ñ—è —Ñ—É–Ω–∫—Ü—ñ—ó = –∫—ñ–ª—å–∫–∞ –º—ñ—Å—Ü—è–º–∏, –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –±–∞–≥–≤–∏. –¶–µ —á–æ–º—É:

‚úÖ **–ó–∞–≤–∂–¥–∏ –≤–∏—Ç—è–≥—É–π—Ç–µ:**
- –¢–∏–ø–∏ –≤ Shared –ø–∞–∫–µ—Ç
- –í–∞–ª—ñ–¥–∞—Ü—ñ—é –≤ Utils
- –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ helpers —Ñ–∞–π–ª–∏
- –ö–æ–Ω—Ñ—ñ–≥–∏ –≤ –æ–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏

‚ùå **–ù—ñ–∫–æ–ª–∏ –Ω–µ –∫–æ–ø—ñ—é–π—Ç–µ:**
- –§—É–Ω–∫—Ü—ñ—ó (copy-paste = future bugs)
- –¢–∏–ø–∏ (—ñ–Ω–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—é (–∑–∞–±—É–¥–µ—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ –æ–¥–Ω–µ –º—ñ—Å—Ü–µ)
