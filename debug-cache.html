<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Translation Cache Debug</title>
</head>
<body>
    <h1>Translation Cache Debug</h1>
    <button onclick="checkCache()">Check Zustand Cache</button>
    <button onclick="clearCache()">Clear Cache</button>
    <button onclick="testAPI()">Test API Direct</button>
    <pre id="output"></pre>
    
    <script>
        const output = document.getElementById('output');
        
        function checkCache() {
            // Check all localStorage keys
            const keys = Object.keys(localStorage);
            output.textContent = 'LocalStorage keys:\n' + keys.join('\n');
            
            // Look for Zustand store
            keys.forEach(key => {
                try {
                    const value = localStorage.getItem(key);
                    if (value && value.includes('bundle')) {
                        output.textContent += '\n\nFound bundle in: ' + key + '\n';
                        const parsed = JSON.parse(value);
                        output.textContent += JSON.stringify(parsed, null, 2).substring(0, 500);
                    }
                } catch (e) {
                    // ignore parse errors
                }
            });
        }
        
        function clearCache() {
            localStorage.clear();
            output.textContent = 'Cache cleared! Reload the app.';
        }
        
        async function testAPI() {
            try {
                const response = await fetch('http://localhost:4000/api/i18n/bundle?lang=UA');
                const data = await response.json();
                output.textContent = 'API Response:\n' + JSON.stringify(data, null, 2).substring(0, 1000);
            } catch (err) {
                output.textContent = 'Error: ' + err.message;
            }
        }
    </script>
</body>
</html>
